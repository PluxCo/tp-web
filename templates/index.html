{% extends "base.html" %}

{% block prescripts %}
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <script>
        let config = {{ config | safe}};
    </script>
    <script type="module" src="{{ url_for('static', filename='index_charts.js') }}"></script>
{% endblock %}

{% block content %}
    <div class="container d-flex">
        <div class="row">
            <h2>Timeline</h2>
            <div class="chart-container">
                <canvas id="TimeLine"></canvas>
            </div>
            <h2>People</h2>
            <div class="col-sm">
                <ul id="PeopleList" class="list-group">
                    {%- for person, correct, answered, all in data -%}
                        <a href="/statistic/{{ person.id }}"
                           class="list-group-item d-flex justify-content-between align-items-center {{ "text-secondary" if person.is_paused else "" }}">
                            {{- person.full_name -}}
                            {% if answered != 0 and (correct / answered) > 0.75 %}
                                <span class="badge bg-success rounded-pill">{{- (correct / answered * 100) | round(1, 'floor') -}}%</span>
                            {% elif answered != 0 and (correct / answered) > 0.5 %}
                                <span class="badge bg-primary rounded-pill">{{- (correct / answered * 100) | round(1, 'floor') -}}%</span>
                            {% elif answered != 0 and (correct / answered) > 0 %}
                                <span class="badge bg-warning rounded-pill">{{- (correct / answered * 100) | round(1, 'floor') -}}%</span>
                            {% elif answered != 0 or correct == 0 %}
                                <span class="badge bg-danger rounded-pill">0 %</span>
                            {% endif %}
                        </a>
                    {%- endfor -%}
                </ul>
            </div>
            <div class="col-sm">

            </div>
        </div>
    </div>
{% endblock %}